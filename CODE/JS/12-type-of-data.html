<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>判断数据类型的方法</title>
</head>
<body>

<script>
  // 一、 typeof 返回字符串，"number"、"string"、"boolean"、"function"、"undefined"，所有引用类型数据都返回 "object"，null 也返回 "object"。
  // typeof [1,2,3];  // "object"
  if (typeof v === "undefined") {
    // typeof可以用来检查一个没有声明的变量，而不报错，返回undefined。这个特点通常用于判断语句中。
    // 这种写法在 v 没有声明的时候不会报错。
  }


  // 二、A instanceof B，如果A是B的实例，则返回true,否则返回false。instanceof检测的是原型
  //instanceof 只能用来判断两个对象是否属于原型链的关系， 而不能获取对象的具体类型。
  [] instanceof Array; //true
  [] instanceof Object; //true

  //三、 constructor 构造函数
  [].constructor === Array;  //true
  window.constructor ===Window //true
  // null和undefined是无效的对象，因此是不会有constructor存在的，这两种类型的数据需要通过typeof来判断。
  // JS对象的constructor是不稳定的，这个主要体现在自定义对象上，当开发者重写prototype后，原有的constructor会丢失，constructor会默认为Object


  //四、原型toString判断数据类型  Object.prototype.toString.call()---------------------------------------
  // 不同数据类型的Object.prototype.toString方法返回值如下。
  // 数值：返回[object Number]。
  // 字符串：返回[object String]。
  // 布尔值：返回[object Boolean]。
  // undefined：返回[object Undefined]。
  // null：返回[object Null]。
  // 数组：返回[object Array]。
  // arguments 对象：返回[object Arguments]。
  // 函数：返回[object Function]。
  // Error 对象：返回[object Error]。
  // Date 对象：返回[object Date]。
  // RegExp 对象：返回[object RegExp]。
  // 其他对象：返回[object Object]。
  var type = function (o) {
    var s = Object.prototype.toString.call(o);
    return s.match(/\[object (.*?)\]/)[1].toLowerCase();
  };
  type({}); // "object"
  type([]); // "array"
  type(5); // "number"
  type(null); // "null"
  type(); // "undefined"
  type(/abcd/); // "regex"
  type(new Date()); // "date"

  // 在type函数的基础上，加上专门判断某种类型数据的方法。
  var dataArr = ['Null', 'Undefined', 'Object', 'Array', 'String', 'Number', 'Boolean', 'Function', 'RegExp'];
  dataArr.forEach(function (t) {
    type['is' + t] = function (o) {
      return type(o) === t.toLowerCase();
    };
  });

  type.isObject({}); // true
  type.isNumber(NaN); // true
  type.isRegExp(/abc/); // true


  // 五、判断变量是否为对象(引用类型)---------------------------------------------------------------------------
  function isObject(value) {
    return value === Object(value);
  }
  isObject([]); // true
  isObject(true); // false

  // 六、判断是不是 NaN,所有数据类型中，只有NaN不等于它本身-----------------------------------------------------------------------------
  function isNaN(value) {
    return value !== value;
  }
  isNaN(NaN);
</script>
</body>
</html>